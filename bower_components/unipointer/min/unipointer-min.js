!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(o,e){return n(t,o,e)}):"object"==typeof exports?module.exports=n(t,require("wolfy87-eventemitter"),require("eventie")):t.Unipointer=n(t,t.EventEmitter,t.eventie)}(window,function t(n,o,e){"use strict";function i(){}function r(){}r.prototype=new o,r.prototype.bindStartEvent=function(t){this._bindStartEvent(t,!0)},r.prototype.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},r.prototype._bindStartEvent=function(t,o){o=void 0===o?!0:!!o;var i=o?"bind":"unbind";n.navigator.pointerEnabled?e[i](t,"pointerdown",this):n.navigator.msPointerEnabled?e[i](t,"MSPointerDown",this):(e[i](t,"mousedown",this),e[i](t,"touchstart",this))},r.prototype.handleEvent=function(t){var n="on"+t.type;this[n]&&this[n](t)},r.prototype.getTouch=function(t){for(var n=0,o=t.length;o>n;n++){var e=t[n];if(e.identifier==this.pointerIdentifier)return e}},r.prototype.onmousedown=function(t){var n=t.button;n&&0!==n&&1!==n||this._pointerDown(t,t)},r.prototype.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},r.prototype.onMSPointerDown=r.prototype.onpointerdown=function(t){this._pointerDown(t,t)},r.prototype._pointerDown=function(t,n){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==n.pointerId?n.pointerId:n.identifier,this.pointerDown(t,n))},r.prototype.pointerDown=function(t,n){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,n])};var p={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};return r.prototype._bindPostStartEvents=function(t){if(t){for(var o=p[t.type],i=t.preventDefault?n:document,r=0,s=o.length;s>r;r++){var u=o[r];e.bind(i,u,this)}this._boundPointerEvents={events:o,node:i}}},r.prototype._unbindPostStartEvents=function(){var t=this._boundPointerEvents;if(t&&t.events){for(var n=0,o=t.events.length;o>n;n++){var i=t.events[n];e.unbind(t.node,i,this)}delete this._boundPointerEvents}},r.prototype.onmousemove=function(t){this._pointerMove(t,t)},r.prototype.onMSPointerMove=r.prototype.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},r.prototype.ontouchmove=function(t){var n=this.getTouch(t.changedTouches);n&&this._pointerMove(t,n)},r.prototype._pointerMove=function(t,n){this.pointerMove(t,n)},r.prototype.pointerMove=function(t,n){this.emitEvent("pointerMove",[t,n])},r.prototype.onmouseup=function(t){this._pointerUp(t,t)},r.prototype.onMSPointerUp=r.prototype.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},r.prototype.ontouchend=function(t){var n=this.getTouch(t.changedTouches);n&&this._pointerUp(t,n)},r.prototype._pointerUp=function(t,n){this._pointerDone(),this.pointerUp(t,n)},r.prototype.pointerUp=function(t,n){this.emitEvent("pointerUp",[t,n])},r.prototype._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},r.prototype.pointerDone=i,r.prototype.onMSPointerCancel=r.prototype.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},r.prototype.ontouchcancel=function(t){var n=this.getTouch(t.changedTouches);n&&this._pointerCancel(t,n)},r.prototype._pointerCancel=function(t,n){this._pointerDone(),this.pointerCancel(t,n)},r.prototype.pointerCancel=function(t,n){this.emitEvent("pointerCancel",[t,n])},r.getPointerPoint=function(t){return{x:void 0!==t.pageX?t.pageX:t.clientX,y:void 0!==t.pageY?t.pageY:t.clientY}},r});